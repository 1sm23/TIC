<html>
    <head>
        <meta charset='utf-8'>
        <meta name='viewport' content='user-scalable=no'>
        <meta name="referrer" content="no-referrer" />
        <script src='https://sqimg.qq.com/expert_qq/edu/axios/axios.min.js'></script>
        <script src="https://sqimg.qq.com/expert_qq/tedu/cos/5.1.0/cos.min.js"></script>
        <script src='https://sqimg.qq.com/expert_qq/tedu/board/2.2.1/TEduBoard.min.js'></script>
        <link rel='stylesheet' type='text/css' href='https://sqimg.qq.com/expert_qq/edu/cssreset/cssreset.css'>
    </head>

    <body style='overflow:hidden' bgcolor='#cccccc'>
        <input id='imeFix' style='position:fixed;left:-100;height:0;width:0;' />
         <div id='board' style='height:100%;width:100%' />
         <script>
            setTimeout(function(){
                try{
                    var imeFix=document.getElementById('imeFix');
                    imeFix.focus();
                    setTimeout(function(){
                        imeFix.remove();
                    }, 1000);
                }catch(e){}
            },0);
         
            function initBoard(params)
            {
                this.board = new TEduBoard(params);

                // 错误事件
                this.board.on(TEduBoard.EVENT.TEB_ERROR, (code, msg) => {
                    CppCallback('callback', 'TEB_ERROR', code, msg);
                });
                this.board.on(TEduBoard.EVENT.TEB_WARNING, (code, msg) => {
                    CppCallback('callback', 'TEB_WARNING', code, msg);
                });

                // 初始化完成
                this.board.on(TEduBoard.EVENT.TEB_INIT, () => {
                    CppCallback('callback', 'TEB_INIT');
                });

                // 历史数据同步事件
                this.board.on(TEduBoard.EVENT.TEB_HISTROYDATA_SYNCCOMPLETED, () => {
                    CppCallback('callback', 'TEB_HISTROYDATA_SYNCCOMPLETED');
                });

                // 实时数据同步事件
                this.board.on(TEduBoard.EVENT.TEB_SYNCDATA, data => {
                    CppCallback('callback', 'TEB_SYNCDATA', JSON.stringify(data));
                });

                // 白板操作事件
                this.board.on(TEduBoard.EVENT.TEB_OPERATE_CANUNDO_STATUS_CHANGED, enable => {
                    CppCallback('callback', 'TEB_OPERATE_CANUNDO_STATUS_CHANGED', enable);
                });
                this.board.on(TEduBoard.EVENT.TEB_OPERATE_CANREDO_STATUS_CHANGED, enable => {
                    CppCallback('callback', 'TEB_OPERATE_CANREDO_STATUS_CHANGED', enable);
                });
                this.board.on(TEduBoard.EVENT.TEB_ADDBOARD, (boardId, fileId) => {
                    CppCallback('callback', 'TEB_ADDBOARD', boardId, fileId);
                });
                this.board.on(TEduBoard.EVENT.TEB_DELETEBOARD, (boardId, fileId) => {
                    CppCallback('callback', 'TEB_DELETEBOARD', boardId, fileId);
                });
                this.board.on(TEduBoard.EVENT.TEB_GOTOBOARD, (boardId, fileId) => {
                    CppCallback('callback', 'TEB_GOTOBOARD', boardId, fileId);
                });

                // 文件操作事件
                this.board.on(TEduBoard.EVENT.TEB_ADDFILE, fileId => {
                    CppCallback('callback', 'TEB_ADDFILE', fileId);
                });
                this.board.on(TEduBoard.EVENT.TEB_ADDH5PPTFILE, fileId => {
                    CppCallback('callback', 'TEB_ADDH5PPTFILE', fileId);
                });
                this.board.on(TEduBoard.EVENT.TEB_DELETEFILE, fileId => {
                    CppCallback('callback', 'TEB_DELETEFILE', fileId);
                });
                this.board.on(TEduBoard.EVENT.TEB_SWITCHFILE, fileId => {
                    CppCallback('callback', 'TEB_SWITCHFILE', fileId);
                });

                // 图片加载事件
                this.board.on(TEduBoard.EVENT.TEB_IMAGE_STATUS_CHANGED, (code, data) => {
                    CppCallback('callback', 'TEB_IMAGE_STATUS_CHANGED', code, data.currentBoardId, data.imgUrl);
                });
                
                //H5加载事件
                this.board.on(TEduBoard.EVENT.TEB_H5BACKGROUND_STATUS_CHANGED, (code, data) => {
                    CppCallback('callback', 'TEB_H5BACKGROUND_STATUS_CHANGED', code, data.currentBoardId, data.url);
                });

                // 设置背景图片
                this.board.on(TEduBoard.EVENT.TEB_SETBACKGROUNDIMAGE, (fileName, fileUrl, userData) => {
                    CppCallback('callback', 'TEB_SETBACKGROUNDIMAGE', fileUrl, userData);
                });

                // 文件上传事件
                this.board.on(TEduBoard.EVENT.TEB_FILEUPLOADPROGRESS, data => {
                    CppCallback('callback', 'TEB_FILEUPLOADPROGRESS', data.loaded, data.total, data.speed, data.percent, data.userData);
                });
                this.board.on(TEduBoard.EVENT.TEB_FILEUPLOADSTATUS, (status, data) => {
                    CppCallback('callback', 'TEB_FILEUPLOADSTATUS', status, data.errorMsg, data.userData, data.fileUrl);
                });

            }
         </script>
    </body>
</html>